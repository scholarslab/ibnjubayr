/*
     http://www.apache.org/licenses/LICENSE-2.0.html Apache 2 License
*/
(function(b){b.widget("neatline.editgeometry",{options:{markup:{geo_edit_class:"geo-edit"},animation:{fade_duration:500}},_create:function(){var a=this;this.editContainer=b("#geo-edit");this.scaleButton=b("#scale-button");this.rotateButton=b("#rotate-button");this.dragButton=b("#drag-button");this.deleteButton=b("#delete-button");this.element.append(this.editContainer);this.scaleButton.data("activated",!1);this.rotateButton.data("activated",!1);this.dragButton.data("activated",!1);this.dragButton.bind({mousedown:function(){a.dragButton.data("activated")?
(a.dragButton.removeClass("btn-neatline"),a.dragButton.data("activated",!1)):(a.dragButton.addClass("btn-neatline"),a.dragButton.data("activated",!0));a._trigger("update",{},{drag:a.dragButton.data("activated"),rotate:a.rotateButton.data("activated"),scale:a.scaleButton.data("activated")})}});this.scaleButton.bind({mousedown:function(){a.scaleButton.data("activated")?(a.scaleButton.removeClass("btn-neatline"),a.scaleButton.data("activated",!1)):(a.scaleButton.addClass("btn-neatline"),a.scaleButton.data("activated",
!0));a._trigger("update",{},{drag:a.dragButton.data("activated"),rotate:a.rotateButton.data("activated"),scale:a.scaleButton.data("activated")})}});this.rotateButton.bind({mousedown:function(){a.rotateButton.data("activated")?(a.rotateButton.removeClass("btn-neatline"),a.rotateButton.data("activated",!1)):(a.rotateButton.addClass("btn-neatline"),a.rotateButton.data("activated",!0));a._trigger("update",{},{drag:a.dragButton.data("activated"),rotate:a.rotateButton.data("activated"),scale:a.scaleButton.data("activated")})}});
this.deleteButton.bind({mousedown:function(){a._trigger("delete")}})},positionControls:function(a,b){this.editContainer.css({top:a+55,left:b+65})},showButtons:function(){this.editContainer.css({display:"block",opacity:0,"z-index":999}).stop().animate({opacity:1},this.options.animation.fade_duration);this.deactivateAllButtons()},hideButtons:function(){var a=this;this.editContainer.stop().animate({opacity:0},this.options.markup.fade_duration,function(){a.editContainer.css("z-index",-99)})},deactivateAllButtons:function(){this.dragButton.removeClass("primary");
this.dragButton.data("activated",!1);this.scaleButton.removeClass("primary");this.scaleButton.data("activated",!1);this.rotateButton.removeClass("primary");this.rotateButton.data("activated",!1)}})})(jQuery);
