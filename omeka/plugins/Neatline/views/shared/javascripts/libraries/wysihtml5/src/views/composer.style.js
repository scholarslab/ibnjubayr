(function(d){var c=d.dom,e=document,h=window,k=e.createElement("div"),f="background-color,color,cursor,font-family,font-size,font-style,font-variant,font-weight,line-height,letter-spacing,text-align,text-decoration,text-indent,text-rendering,word-break,word-wrap,word-spacing".split(","),i="background-color,border-collapse,border-bottom-color,border-bottom-style,border-bottom-width,border-left-color,border-left-style,border-left-width,border-right-color,border-right-style,border-right-width,border-top-color,border-top-style,border-top-width,clear,display,float,margin-bottom,margin-left,margin-right,margin-top,outline-color,outline-offset,outline-width,outline-style,padding-left,padding-right,padding-top,padding-bottom,position,top,left,right,bottom,z-index,vertical-align,text-align,-webkit-box-sizing,-moz-box-sizing,-ms-box-sizing,box-sizing,-webkit-box-shadow,-moz-box-shadow,-ms-box-shadow,box-shadow,-webkit-border-top-right-radius,-moz-border-radius-topright,border-top-right-radius,-webkit-border-bottom-right-radius,-moz-border-radius-bottomright,border-bottom-right-radius,-webkit-border-bottom-left-radius,-moz-border-radius-bottomleft,border-bottom-left-radius,-webkit-border-top-left-radius,-moz-border-radius-topleft,border-top-left-radius,width,height".split(","),
m="width,height,top,left,right,bottom".split(","),n=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",d.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],
p=function(b){if(b.setActive)try{b.setActive()}catch(d){}else{var a=b.style,g=e.documentElement.scrollTop||e.body.scrollTop,f=e.documentElement.scrollLeft||e.body.scrollLeft,a={position:a.position,top:a.top,left:a.left,WebkitUserSelect:a.WebkitUserSelect};c.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(b);b.focus();c.setStyles(a).on(b);h.scrollTo&&h.scrollTo(f,g)}};d.views.Composer.prototype.style=function(){var b=this,j=e.querySelector(":focus"),a=this.textarea.element,
g=a.hasAttribute("placeholder"),o=g&&a.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||k.cloneNode(!1);this.blurStylesHost=this.blurStylesHost||k.cloneNode(!1);g&&a.removeAttribute("placeholder");a===j&&a.blur();c.copyStyles(i).from(a).to(this.iframe).andTo(this.blurStylesHost);c.copyStyles(f).from(a).to(this.element).andTo(this.blurStylesHost);c.insertCSS(n).into(this.element.ownerDocument);p(a);c.copyStyles(i).from(a).to(this.focusStylesHost);c.copyStyles(f).from(a).to(this.focusStylesHost);
var l=d.lang.array(i).without(["display"]);j?j.focus():a.blur();g&&a.setAttribute("placeholder",o);if(!d.browser.hasCurrentStyleProperty())var q=c.observe(h,"resize",function(){if(c.contains(document.documentElement,b.iframe)){var d=c.getStyle("display").from(a),e=c.getStyle("display").from(b.iframe);a.style.display="";b.iframe.style.display="none";c.copyStyles(m).from(a).to(b.iframe).andTo(b.focusStylesHost).andTo(b.blurStylesHost);b.iframe.style.display=e;a.style.display=d}else q.stop()});this.parent.observe("focus:composer",
function(){c.copyStyles(l).from(b.focusStylesHost).to(b.iframe);c.copyStyles(f).from(b.focusStylesHost).to(b.element)});this.parent.observe("blur:composer",function(){c.copyStyles(l).from(b.blurStylesHost).to(b.iframe);c.copyStyles(f).from(b.blurStylesHost).to(b.element)});return this}})(wysihtml5);
