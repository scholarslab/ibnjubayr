wysihtml5.dom.parse=function(){function j(a,b){var c=a.childNodes,d=c.length,e;e=p[a.nodeType];var f=0;e=e&&e(a);if(!e)return null;for(f=0;f<d;f++)(newChild=j(c[f],b))&&e.appendChild(newChild);return b&&e.childNodes.length<=1&&e.nodeName.toLowerCase()===q&&!e.attributes.length?e.firstChild:e}function r(a,b){var b=b.toLowerCase(),c;if(c=a.nodeName=="IMG")if(c=b=="src"){var d;try{d=a.complete&&!a.mozMatchesSelector(":-moz-broken")}catch(e){a.complete&&a.readyState==="complete"&&(d=!0)}c=d===!0}return c?
a.src:s&&"outerHTML"in a?a.outerHTML.toLowerCase().indexOf(" "+b+"=")!=-1?a.getAttribute(b):null:a.getAttribute(b)}var p={1:function(a){var b,c,d=m.tags;c=a.nodeName.toLowerCase();b=a.scopeName;if(a._wysihtml5)return null;a._wysihtml5=1;if(a.className==="wysihtml5-temp")return null;b&&b!="HTML"&&(c=b+":"+c);"outerHTML"in a&&!wysihtml5.browser.autoClosesUnclosedTags()&&a.nodeName==="P"&&a.outerHTML.slice(-4).toLowerCase()!=="</p>"&&(c="div");if(c in d){b=d[c];if(!b||b.remove)return null;b=typeof b===
"string"?{rename_tag:b}:b}else if(a.firstChild)b={rename_tag:q};else return null;c=a.ownerDocument.createElement(b.rename_tag||c);var d={},e=b.set_class,f=b.add_class,h=b.set_attributes,n=b.check_attributes,k=m.classes,o=0,i=[];b=[];var l=[],j=[],g;h&&(d=wysihtml5.lang.object(h).clone());if(n)for(g in n)if(h=t[n[g]])h=h(r(a,g)),typeof h==="string"&&(d[g]=h);e&&i.push(e);if(f)for(g in f)if(h=u[f[g]])e=h(r(a,g)),typeof e==="string"&&i.push(e);k["_wysihtml5-temp-placeholder"]=1;(j=a.getAttribute("class"))&&
(i=i.concat(j.split(v)));for(f=i.length;o<f;o++)a=i[o],k[a]&&b.push(a);for(k=b.length;k--;)a=b[k],wysihtml5.lang.array(l).contains(a)||l.unshift(a);l.length&&(d["class"]=l.join(" "));for(g in d)try{c.setAttribute(g,d[g])}catch(p){}d.src&&(typeof d.width!=="undefined"&&c.setAttribute("width",d.width),typeof d.height!=="undefined"&&c.setAttribute("height",d.height));return c},3:function(a){return a.ownerDocument.createTextNode(a.data)}},q="span",v=/\s+/,w={tags:{},classes:{}},m={},s=!wysihtml5.browser.supportsGetAttributeCorrectly(),
t={url:function(){var a=/^https?:\/\//i;return function(b){return!b||!b.match(a)?null:b.replace(a,function(a){return a.toLowerCase()})}}(),alt:function(){var a=/[^ a-z0-9_\-]/gi;return function(b){return!b?"":b.replace(a,"")}}(),numbers:function(){var a=/\D/g;return function(b){return(b=(b||"").replace(a,""))||null}}()},u={align_img:function(){var a={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(b){return a[String(b).toLowerCase()]}}(),align_text:function(){var a={left:"wysiwyg-text-align-left",
right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(b){return a[String(b).toLowerCase()]}}(),clear_br:function(){var a={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(b){return a[String(b).toLowerCase()]}}(),size_font:function(){var a={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",
6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(b){return a[String(b).charAt(0)]}}()};return function(a,b,c,d){wysihtml5.lang.object(m).merge(w).merge(b).get();for(var c=c||a.ownerDocument||document,b=c.createDocumentFragment(),e=typeof a==="string",a=e?wysihtml5.dom.getAsDom(a,c):a;a.firstChild;)c=a.firstChild,a.removeChild(c),(c=j(c,d))&&b.appendChild(c);a.innerHTML="";a.appendChild(b);return e?wysihtml5.quirks.getCorrectInnerHTML(a):
a}}();
