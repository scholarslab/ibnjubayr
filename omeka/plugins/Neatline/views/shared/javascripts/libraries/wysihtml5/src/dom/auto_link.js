(function(e){function l(b){return b.replace(g,function(b,a){var d=(a.match(h)||[])[1]||"",f=m[d],a=a.replace(h,"");a.split(f).length>a.split(d).length&&(a+=d,d="");var e=f=a;a.length>i&&(e=e.substr(0,i)+"...");f.substr(0,4)==="www."&&(f="http://"+f);return'<a href="'+f+'">'+e+"</a>"+d})}function j(b){if(!k.contains(b.nodeName))if(b.nodeType===e.TEXT_NODE&&b.data.match(g)){var c=b.parentNode,a;a=c.ownerDocument;var d=a._wysihtml5_tempElement;if(!d)d=a._wysihtml5_tempElement=a.createElement("div");
a=d;a.innerHTML="<span></span>"+l(b.data);for(a.removeChild(a.firstChild);a.firstChild;)c.insertBefore(a.firstChild,b);c.removeChild(b)}else{c=e.lang.array(b.childNodes).get();a=c.length;for(d=0;d<a;d++)j(c[d]);return b}}var k=e.lang.array("CODE,PRE,A,SCRIPT,HEAD,TITLE,STYLE".split(",")),g=/((https?:\/\/|www\.)[^\s<]{3,})/gi,h=/([^\w\/\-](,?))$/i,i=100,m={")":"(","]":"[","}":"{"};e.dom.autoLink=function(b){var c;a:{c=b;for(var a;c.parentNode;)if(c=c.parentNode,a=c.nodeName,k.contains(a)){c=!0;break a}else if(a===
"body")break;c=!1}if(c)return b;if(b===b.ownerDocument.documentElement)b=b.ownerDocument.body;return j(b)};e.dom.autoLink.URL_REG_EXP=g})(wysihtml5);
