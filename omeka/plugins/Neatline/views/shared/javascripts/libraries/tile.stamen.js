(function(b){function e(a,c,g){for(var f=h(a),d=0;d<c.length;d++){var b=[a,c[d]].join("-");i[b]=j(b,g||f.type,f.minZoom,f.maxZoom)}}function h(a){if(a in i)return i[a];else throw"No such provider ("+a+")";}var d=" a. b. c. d.".split(" "),j=function(a,c,g,f){return{url:["http://{S}tile.stamen.com/",a,"/{Z}/{X}/{Y}.",c].join(""),type:c,subdomains:d.slice(),minZoom:g,maxZoom:f}},i={toner:j("toner","png",0,20),terrain:j("terrain","jpg",4,18),watercolor:j("watercolor","jpg",3,16)};e("toner",["hybrid",
"labels","lines","background","lite"]);e("toner",["2010"]);e("toner",["2011","2011-lines","2011-labels","2011-lite"]);e("terrain",["background"]);e("terrain",["labels","lines"],"png");b.stamen=b.stamen||{};b.stamen.tile=b.stamen.tile||{};b.stamen.tile.providers=i;b.stamen.tile.getProvider=h;if(typeof MM==="object"){var l=typeof MM.Template==="function"?MM.Template:MM.TemplatedMapProvider;MM.StamenTileLayer=function(a){a=h(a);MM.Layer.call(this,new l(a.url,d));this.provider.setZoomRange(a.minZoom,
a.maxZoom);this.attribution='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'};MM.extend(MM.StamenTileLayer,MM.Layer)}if(typeof L==="object")L.StamenTileLayer=L.TileLayer.extend({initialize:function(a){var a=h(a),c=a.url.replace(/({[A-Z]})/g,function(a){return a.toLowerCase()});
L.TileLayer.prototype.initialize.call(this,c,{minZoom:a.minZoom,maxZoom:a.maxZoom,subdomains:d,scheme:"xyz",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'})}});if(typeof OpenLayers==="object"){var k=function(a){return a.replace(/({.})/g,function(a){return"$"+a.toLowerCase()})};
OpenLayers.Layer.Stamen=OpenLayers.Class(OpenLayers.Layer.OSM,{initialize:function(a,c){var g=h(c.provider||a),f=g.url,b=[];if(f.indexOf("{S}")>-1)for(var e=0;e<d.length;e++)b.push(k(f.replace("{S}",d[e])));else b.push(k(f));c=OpenLayers.Util.extend({numZoomLevels:g.maxZoom,buffer:0,transitionEffect:"resize",crossOriginKeyword:"anonymous"},c);return OpenLayers.Layer.OSM.prototype.initialize.call(this,a,b,c)}})}if(typeof google==="object"&&typeof google.maps==="object")google.maps.StamenMapType=function(a){var c=
h(a);return google.maps.ImageMapType.call(this,{getTileUrl:function(a,b){return[c.url.replace("{S}",d[(b+a.x+a.y)%d.length]).replace("{Z}",b).replace("{X}",a.x).replace("{Y}",a.y)]},tileSize:new google.maps.Size(256,256),name:a,minZoom:c.minZoom,maxZoom:c.maxZoom})},google.maps.StamenMapType.prototype=new google.maps.ImageMapType("_")})(typeof exports==="undefined"?this:exports);
